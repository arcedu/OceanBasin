<!DOCTYPE html>
<html>
     <head>

        <title>Rotating a Cube</title>

    </head>

    <body>
        drawPlane
        <script src="js/three.js"></script>

        <script>

            var camera, scene, renderer, plate, cone, cylinder, material, mesh;
        var doRotating =false;
            init();
            window.addEventListener('click', onClick);

            animate();

            function init() {

                scene = new THREE.Scene();
                addCamera();

                drawPlane();
                drawTitle();

                console.log('BEFORE render');

                renderer = new THREE.WebGLRenderer();
                renderer.setSize(window.innerWidth, window.innerHeight);
                document.body.appendChild(renderer.domElement);

                console.log('render END');
            }

            function addCamera() {
                camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 10000);
                camera.position.z = 500;
                camera.position.y = 800;
                camera.lookAt(new THREE.Vector3(0, 80, 100));
                scene.add(camera);
            }

            function drawPlane() {
                //var geometry = new THREE.PlaneGeometry( 5, 20, 32 );
                //var material = new THREE.MeshBasicMaterial( {color: 0xffff00, side: THREE.DoubleSide} );
                //var plane = new THREE.Mesh( geometry, material );
                //scene.add( plane );
                var depth = 50;
                var vertexHeight = 200,
                       planeDefinition = depth,
                       planeSize = 1000,
                       totalObjects = 1,
                       background = "#002135",
                       meshColor = "#005e55";
                var planeGeo = new THREE.PlaneBufferGeometry(planeSize, planeSize / 2, planeDefinition, planeDefinition);
                //planeGeo.vertices[1].y = 10;
                //                plane.geometry.verticesNeedUpdate = true;


                var position = planeGeo.attributes.position;
                var vector = new THREE.Vector3();

                for (let i = 0, l = position.count; i < l; i++) {
                    var z = 60;
                    var x = position.getX(i);
                    var y = position.getY(i);
                    // (1) high mountain
                    if (x <= -490) {
                        z = 220;
                        if (y % 30 === 0) { z = 225; }
                        if (y % 50 === 0) { z = 250; }
                        if (y % 70 === 0) { z = 240; }
                        if (y % 110 === 0) { z = 230; }
                    }
                    if (x > -490 && x <= -480 ) {
                        z = 210;
                        if (y % 30 === 0) { z = 215; }
                        if (y % 50 === 0) { z = 220; }
                        if (y % 70 === 0) { z = 225; }
                    }

                    // beach
                    if (x > -480 && x <= -460) {
                        z = 200;
                        if ((y + 10) % 30 === 0) { z = 195; }
                        if ((y + 10) % 50 === 0) { z = 200; }
                        if ((y + 10) % 70 === 0) { z = 210; }
                      
                    }
                    if (x > -460 && x <= -440) {
                        z = 195;
                        if ((y + 10) % 70 === 0) { z = 193; }
                        if ((y + 10) % 110 === 0) { z = 190; }
                        if ((y + 10) % 170 === 0) { z = 195; }
                    }
                    // shallow ocean
                    if (x > -440 && x <= -360) {
                        z = 190; 
                        if ((y + 20) % 280 === 0 && x >= -390) { z = 180; }
                   
                        if ((y) % 100 === 10 && x> -380) { x = x + 9;  }
                        if ((y) % 100 === 20 && x > -380) { x = x + 8; }
                        if ((y) % 100 === 30 && x > -380) { x = x + 7; }
                        if ((y) % 100 === 40 && x > -380) { x = x + 5;}
                        if ((y) % 100 === 50 && x > -380) { x = x + 3;}
                        if ((y) % 100 === 60 && x > -380) { x = x + 1;}
                        if ((y) % 100 === 70 && x > -380) { x = x + 3;}
                        if ((y) % 100 === 80 && x > -380) { x = x + 5;}
                        if ((y) % 100 === 90 && x > -380) { x = x + 7;}
                        if ((y) % 100 === 00 && x > -380) { x = x + 9;}
                    }

                    // step1
                    if (x > -360 && x <= -320) {
                        z = 130;
                        if ((y+20) % 280 === 0) { z = 110; }
                    }
                    // island
                    if (x >= -240 && y >= 150 &&
                        x <= -180 && y <= 210) { z = 90; }
                    if (x >= -230 && y >= 160 &&
                        x <= -190 && y <= 200) { z = 140; }
                    if (x >= -220 && y >= 170 &&
                        x <= -200 && y <= 190) { z = 180; }
                    if (x >= -210 && y >= 180 &&
                          x <= -200 && y <= 190) { z = 200; }

                    // under water volcano 
                    if (x >= -190 && y >= 50 &&
                        x <= -140 && y <= 90) {
                        z = 90;
                        if (y >= 50 && x<-130){ x = x + 2; position.setX(i, x);}
                        if (y >= 60 && x < -130) { x = x + 5; position.setX(i, x); }
                        if (y >= 70 && x < -130) { x = x + 8; position.setX(i, x); }
                        if (y >= 80 && x < -130) { x = x + 5; position.setX(i, x); }
                        if (y >= 90 && x < -130) { x = x + 2; position.setX(i, x); }
                    }
                    if (x >= -170 && y >= 80 &&
                        x <= -150 && y <= 100) { z = 120; }


                    // ridge 
                    if (x >= -90 && x < -70) { z = 60; }
                    if (x >= -70 && x < -50) { z = 55; }
                    if (x >= -50 && x < -20) { z = 75; }
                    if (x >= -20 && x < -10) { z = 50; }
                    if (x >= -10 && x < 10) { z = 80; }
                    if (x >= 10 && x < 40) { z = 0; }  // deepset
                    if (x >= 40 && x < 60) { z = 80; }
                    if (x >= 60 && x < 80) { z = 50; }
                    if (x >= 80 && x < 100) { z = 75; }
                    if (x >= 100 && x < 120) { z = 55; }
                    if (x >= 120 && x < 140) { z = 60; }
                    
                    // trench 
                    if (x > 260 && x <= 280) { z = 50; }
                    if (x > 280 && x <= 300) { z = 30; }
                    if (x > 300 && x <= 320) { z = 10; }
                    if (x > 320 && x <= 340) { z = -10; }
                    if (x > 340 && x <= 360) { z = -50; }
                    
                    // right step1
                    if (x > 400 && x <= 460) {
                        z = 130;
                        if ((y + 90) % 290 === 0 && x < 450) { z = 120; }
                    }
                    // right mountain
                    if (x > 460 && x <= 480) {
                        z = 190;
                        if ((y) % 100 === 10 && x > 470) { x = x + 7; position.setX(i, x); }
                        if ((y) % 100 === 20 && x > 470) { x = x + 9; position.setX(i, x); }
                        if ((y) % 100 === 30 && x > 470) { x = x + 7; position.setX(i, x); }
                        if ((y) % 100 === 40 && x > 470) { x = x + 5; position.setX(i, x); }
                        if ((y) % 100 === 50 && x > 470) { x = x + 3; position.setX(i, x); }
                        if ((y) % 100 === 60 && x > 470) { x = x + 1; position.setX(i, x); }
                        if ((y) % 100 === 70 && x > 470) { x = x + 3; position.setX(i, x); }
                        if ((y) % 100 === 80 && x > 470) { x = x + 5; position.setX(i, x); }
                        if ((y) % 100 === 90 && x > 470) { x = x + 7; position.setX(i, x); }
                        if ((y) % 100 === 00 && x > 470) { x = x + 9; position.setX(i, x); }

                        if (y  <= 10 && x > 470) { x = x + 7; position.setX(i, x); }
                        if (y >10 && y <= 20 && x > 470) { x = x + 9; position.setX(i, x); }
                        if (y > 20 && y <= 30 && x > 470) { x = x + 7; position.setX(i, x); }
                        if (y > 30 && y <= 40 && x > 470) { x = x + 5; position.setX(i, x); }
                        if (y > 40 && y <= 50 && x > 470) { x = x + 3; position.setX(i, x); }
                        if (y > 50 && y <= 60 && x > 470) { x = x + 1; position.setX(i, x); }
                        if (y > 60 && y <= 70 && x > 470) { x = x + 3; position.setX(i, x); }
                        if (y > 70 && y <= 80 && x > 470) { x = x + 5; position.setX(i, x); }
                        if (y > 80 && y <= 90 && x > 470) { x = x + 7; position.setX(i, x); }
                        
                    }
                    // right beach
                    if (x > 480 && x <= 500) {
                        z = 200;
                        if ((y + 10) % 30 === 0) { z = 195; }
                        if ((y + 10) % 50 === 0) { z = 200; }
                        if ((y + 10) % 70 === 0) { z = 210; }
                    }

                    // add random noise to X,Y and Z
                    z = z + getRandomIntInclusive(-1, 1);
                    y = y + getRandomIntInclusive(-2, 2);
                    x = x + getRandomIntInclusive(-2, 2);
                    position.setX(i, x);
                    position.setY(i, y);
                    position.setZ(i, z);
                    position.needsUpdate = true;

                    vector.fromBufferAttribute(position, i);
                }
                console.log(position.count); //2601

                // load a texture
                var url1 = 'https://raw.githubusercontent.com/arcedu/OceanBasin/main/OceanBasin/image/oceanbasinred9.jpg' ;
                var loader = new THREE.TextureLoader();
                var plane = new THREE.Mesh(planeGeo,
                    new THREE.MeshBasicMaterial({
                        map: loader.load(url1) ,
                        //color: meshColor,
                        wireframe: true,
                        opacity: 0.5,
                        transparent: true
                    }));
                plane.rotation.x -= Math.PI * .5;
                scene.add(plane);

                console.log('load Plane End'); 

            }
            function getRandomIntInclusive(min, max) {
                min = Math.ceil(min);
                max = Math.floor(max);
                return Math.floor(Math.random() * (max - min + 1) + min); //The maximum is inclusive and the minimum is inclusive
            }

            function drawTitle() {
                console.log('drawTitle');
                var geometry = new THREE.BoxGeometry(120, 50, 50);
                var textureLoader = new THREE.TextureLoader();
               // var url1 = 'https://threejsfundamentals.org/threejs/resources/images/wall.jpg';
                var url1 = 'https://raw.githubusercontent.com/arcedu/OceanBasin/main/OceanBasin/image/right.jpg';
                var url2 = 'https://raw.githubusercontent.com/arcedu/OceanBasin/main/OceanBasin/image/Left.jpg';
                var url3 = 'https://raw.githubusercontent.com/arcedu/OceanBasin/main/OceanBasin/image/Title1.jpg';
                var url4 = 'https://raw.githubusercontent.com/arcedu/OceanBasin/main/OceanBasin/image/Title2.jpg';
                var url5 = 'https://raw.githubusercontent.com/arcedu/OceanBasin/main/OceanBasin/image/Title3.jpg';
                var url6 = 'https://raw.githubusercontent.com/arcedu/OceanBasin/main/OceanBasin/image/JS180.jpg';
                var materials = [
                    new THREE.MeshBasicMaterial({ map: textureLoader.load(url1) }),
                    new THREE.MeshBasicMaterial({ map: textureLoader.load(url2) }),
                    new THREE.MeshBasicMaterial({ map: textureLoader.load(url3) }),
                    new THREE.MeshBasicMaterial({ map: textureLoader.load(url4) }),
                    new THREE.MeshBasicMaterial({ map: textureLoader.load(url5) }),
                    new THREE.MeshBasicMaterial({ map: textureLoader.load(url6) })
                ];
                
                mesh = new THREE.Mesh(geometry, materials);
                mesh.position.y = 400;

                scene.add(mesh);
                console.log('drawTitle END');
            }


            function drawWave() {
                
            }

         
            function drawCone() {
                {
                    var geometry = new THREE.ConeGeometry(12, 30, 20);
                    var material = new THREE.MeshNormalMaterial();
                    var cone = new THREE.Mesh(geometry, material);
                    cone.position.y = 15;
                    cone.position.x = -100;
                    cone.position.z = 60;
                    cone.rotation.x = 0.6;
                    cone.rotation.y = 0;
                    cone.rotation.z = 0;
                    scene.add(cone);

                    cone = new THREE.Mesh(geometry, material);
                    cone.position.y = 15;
                    cone.position.x = -60;
                    cone.position.z = 20;
                    cone.rotation.x = 0.6;
                    cone.rotation.y = 0;
                    cone.rotation.z = 0;
                    scene.add(cone);
                }
            }

       
            function animate() {
                requestAnimationFrame(animate);
                render();
            }

            function render() {
                    if (doRotating ){
                                    mesh.rotation.x += 0.005;
                                  //  mesh.rotation.y += 0.02;
                    }
                renderer.render(scene, camera);
            }

            function onClick(event) {
                event.preventDefault();
                doRotating = !doRotating;
            }

        </script>
    </body>

</html>